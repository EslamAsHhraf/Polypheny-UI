<app-toast></app-toast>
<h2>Jupyter Notebooks</h2>
<p>Testing the API...</p>


<div class="row">
    <div class="col-lg-4 fixed-width">
        <div class="card">
            <div class="card-header">
                <span class="mb-0">Retrieve Information</span>
            </div>
            <div class="card-body">
                <form [formGroup]="requestGetForm" (submit)="sendGetRequest()">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="request-type">Request</label>
                        </div>
                        <select class="form-control" formControlName="request" id="request-type">
                            <option value="contents">Contents</option>
                            <option value="kernelspecs">Available Kernels</option>
                            <option value="kernels">Running Kernels</option>
                            <option value="session">Session</option>
                            <option value="sessions">Sessions</option>
                        </select>
                    </div>
                    <div class="input-group mb-3" *ngIf="['contents', 'session'].includes(this.requestGetForm.get('request').value)">
                        <div class="input-group-prepend">
                            <label for="request-path" class="input-group-text">Path</label>
                        </div>
                        <input type="text" id="request-path" autocomplete="off" class="form-control"
                               formControlName="path"
                               placeholder="(optional)">
                    </div>
                    <div class="form-group mb-0 text-right">
                        <button type="submit" class="btn btn-primary"
                                [ngClass]="{'progress-bar-striped progress-bar-animated': requestSubmitted}"
                                [disabled]="requestSubmitted">Send
                        </button>
                    </div>
                </form>
            </div>
            <div class="list-group list-group-flush" *ngIf="requestGetText">
                <pre class="list-group-item">{{ requestGetText }}</pre>
            </div>
        </div>
    </div>

    <div class="col-lg-4 fixed-width">
        <div class="card">
            <div class="card-header">
                <span class="mb-0">Create Session</span>
            </div>
            <div class="card-body">
                <form [formGroup]="createSessionForm" (submit)="createSession()">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <label for="createSession-name" class="input-group-text">Name</label>
                        </div>
                        <input type="text" id="createSession-name" autocomplete="off" class="form-control"
                               formControlName="name">
                    </div>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <label for="createSession-path" class="input-group-text">Path</label>
                        </div>
                        <input type="text" id="createSession-path" autocomplete="off" class="form-control"
                               formControlName="path">
                    </div>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="createSession-kernel">Kernel</label>
                        </div>
                        <select class="form-control" formControlName="kernel" id="createSession-kernel">
                            <option value="python3">Python</option>
                        </select>
                    </div>
                    <div class="form-group mb-0 text-right">
                        <button type="submit" class="btn btn-primary"
                                [ngClass]="{'progress-bar-striped progress-bar-animated': requestSubmitted}"
                                [disabled]="requestSubmitted">Send
                        </button>
                    </div>
                </form>
            </div>
            <div class="list-group list-group-flush" *ngIf="createSessionText">
                <pre class="list-group-item">{{ createSessionText }}</pre>
            </div>
        </div>
    </div>

    <div class="col-lg-4 fixed-width">
        <div class="card">
            <div class="card-header">
                <span class="mb-0">Manage Kernels and Sessions</span>
            </div>
            <div class="card-body">
                <form [formGroup]="manageKernelForm" (submit)="manageKernel()">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="manageKernel-action">Action</label>
                        </div>
                        <select class="form-control" formControlName="action" id="manageKernel-action">
                            <option value="interrupt">Interrupt Kernel</option>
                            <option value="restart">Restart Kernel</option>
                            <option value="deleteSession">Delete Session</option>
                        </select>
                    </div>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="manageKernel-id">ID</label>
                        </div>
                        <input type="text" id="manageKernel-id" autocomplete="off" class="form-control"
                               formControlName="id">
                    </div>
                    <div class="form-group mb-0 text-right">
                        <button type="submit" class="btn btn-primary"
                                [ngClass]="{'progress-bar-striped progress-bar-animated': requestSubmitted}"
                                [disabled]="requestSubmitted">Send
                        </button>
                    </div>
                </form>
            </div>
            <div class="list-group list-group-flush" *ngIf="manageKernelText">
                <pre class="list-group-item">{{ manageKernelText }}</pre>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-4 fixed-width">
        <div class="card">
            <div class="card-header">
                <span class="mb-0">Create File</span>
            </div>
            <div class="card-body">
                <form [formGroup]="createFileForm" (submit)="createFile()">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <label for="createFile-path" class="input-group-text">Location</label>
                        </div>
                        <input type="text" id="createFile-path" autocomplete="off" class="form-control"
                               formControlName="path">
                    </div>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="createFile-type">File Type</label>
                        </div>
                        <select class="form-control" formControlName="type" id="createFile-type">
                            <option value="notebook">Notebook</option>
                            <option value="directory">Directory</option>
                            <option value="file">File</option>
                        </select>
                    </div>
                    <div class="input-group mb-3" *ngIf="this.createFileForm.get('type').value === 'file'">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="createFile-ext">Extension</label>
                        </div>
                        <input type="text" id="createFile-ext" autocomplete="off" class="form-control"
                               formControlName="ext">
                    </div>
                    <div class="form-group mb-0 text-right">
                        <button type="submit" class="btn btn-primary"
                                [ngClass]="{'progress-bar-striped progress-bar-animated': requestSubmitted}"
                                [disabled]="requestSubmitted">Send
                        </button>
                    </div>
                </form>
            </div>
            <div class="list-group list-group-flush" *ngIf="createFileText">
                <pre class="list-group-item">{{ createFileText }}</pre>
            </div>
        </div>
    </div>

    <div class="col-lg-4 fixed-width">
        <div class="card">
            <div class="card-header">
                <span class="mb-0">Manage Files</span>
            </div>
            <div class="card-body">
                <form [formGroup]="manageFileForm" (submit)="manageFile()">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="manageFile-action">Action</label>
                        </div>
                        <select class="form-control" formControlName="action" id="manageFile-action">
                            <option value="move">Move / Rename</option>
                            <option value="upload">Upload</option>
                            <option value="delete">Delete</option>
                        </select>
                    </div>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <label for="manageFile-path" class="input-group-text">File Path</label>
                        </div>
                        <input type="text" id="manageFile-path" autocomplete="off" class="form-control"
                               formControlName="path">
                    </div>

                    <div class="input-group mb-3" *ngIf="this.manageFileForm.get('action').value !== 'delete'">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="manageFile-arg">Argument</label>
                        </div>
                        <input type="text" id="manageFile-arg" autocomplete="off" class="form-control"
                               formControlName="arg">
                    </div>
                    <div class="form-group mb-0 text-right">
                        <button type="submit" class="btn btn-primary"
                                [ngClass]="{'progress-bar-striped progress-bar-animated': requestSubmitted}"
                                [disabled]="requestSubmitted">Send
                        </button>
                    </div>
                </form>
            </div>
            <div class="list-group list-group-flush" *ngIf="manageFileText">
                <pre class="list-group-item">{{ manageFileText }}</pre>
            </div>
        </div>
    </div>
</div>
