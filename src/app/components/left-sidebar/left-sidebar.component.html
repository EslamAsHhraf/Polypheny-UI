<div id="tree-outer-wrapper" class="schema-editing d-flex flex-column h-100 w-auto gap-2">

    <c-input-group>
        <button cButton color="light" cInputGroupText id="basic-addon1" *ngIf="isExpandAndCollapseShown()">
            <span (click)="collapseAll()" id="collapse"><i class="fa fa-compress"></i></span>
        </button>
        <input cFormControl type="text" placeholder="search" id="search-tree">
        <button cButton color="light" cInputGroupText *ngIf="isExpandAndCollapseShown()">
            <span (click)="expandAll()" id="expand"><i class="fa fa-expand"></i></span>
        </button>
    </c-input-group>

    <div class="w-100 text-center flex-grow-1 d-flex align-items-center" *ngIf="this._catalog.state() !== CatalogState.UP_TO_DATE">
        <c-spinner aria-hidden="true" size="xl" class="mx-auto"></c-spinner>
    </div>
    <c-button-group *ngIf="buttons.length > 0" role="group">
        <button cButton *ngFor="let item of buttons" type="button" [class.btn-secondary]="!item.isOutline"
                [class.btn-outline-secondary]="item.isOutline" (click)="item.clickEvent($event)" onclick="this.blur();">
            {{ item.name }}
        </button>
    </c-button-group>

    <span *ngIf="error">
        {{error}}
    </span>
    <div id="tree-inner-wrapper" [classList]="this._catalog.state() === CatalogState.UP_TO_DATE ? 'flex-grow-1' : 'flex-grow-0' ">
        <tree-root [nodes]="nodes" [options]="options" [class]="{'no-children': !hasChildren(nodes)}" #tree>
            <ng-template #treeNodeWrapperTemplate let-index="index" let-node>
                <div class="node-wrapper" [style.padding-left]="node.getNodePadding()">
                    <tree-node-expander [ngClass]="{'hidden-expander': node.data.children.length === 0}" [node]="node">
                        <i class="fa fa-plus"></i>
                    </tree-node-expander>
                    <div class="node-content-wrapper"
                         [class.node-content-wrapper-active]="node.isActive"
                         [class.node-content-wrapper-focused]="false"
                         [class.separator]="node.data.isSeparator"
                         [ngClass]="node.data.cssClass"
                         (click)="node.mouseAction('click', $event)"
                         (dblclick)="node.mouseAction('dblClick', $event)"
                         (contextmenu)="node.mouseAction('contextMenu', $event)"
                         (treeDrop)="node.onDrop($event)"
                         [treeAllowDrop]="node.allowDrop"
                         [treeDrag]="node"
                         [treeDragEnabled]="node.allowDrag()">
                        <span *ngIf="node.data.icon" [ngClass]="[node.data.icon, 'sidebarIcon']"></span>
                        <span *ngIf="node.data.relAlgSymbol" [innerHTML]="node.data.relAlgSymbol"
                              class="relAlgSymbol"></span>
                        <span class="title" [innerHTML]="node.data.name"></span>
                    </div>
                </div>
            </ng-template>
        </tree-root>
    </div>


    <div *ngIf="needsButton()" class="schema-editing-wrapper">
        <div class="border-top my-3 "></div>
        <p class="namespace-button node-content-wrapper" id="namespaceText" [routerLink]="'/views/schema-editing/'">
            <i class="fa fa-pencil" aria-hidden="true"></i>
            <span class="ms-1"> Manage Namespaces</span>
        </p>
    </div>


</div>
